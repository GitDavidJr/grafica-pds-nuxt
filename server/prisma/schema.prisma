generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Funcionario {
    id        Int      @id @default(autoincrement())
    nome      String
    cpf       String
    telefone  String
    email     String   @unique
    senha     String
    createdAt DateTime @default(now())

    cargo String
}

model Produto {
    id        Int    @id @default(autoincrement())
    preco     Float
    nome      String
    descricao String

    pedidoProduto PedidoProduto[]
}

model PedidoProduto {
    id        Int     @id @default(autoincrement())
    pedido    Pedido  @relation(fields: [pedidoId], references: [id])
    produto   Produto @relation(fields: [produtoId], references: [id])
    pedidoId  Int
    produtoId Int
}

model Pedido {
    id               Int      @id @default(autoincrement())
    descricao        String
    createdAt        DateTime @default(now())
    previsao_entrega DateTime
    preco_total      Float
    desconto         Float

    cliente       Cliente         @relation(fields: [clienteId], references: [id])
    clienteId     Int
    pedidoProduto PedidoProduto[]
    FichaProducao FichaProducao[]
}

model FichaProducao {
    id           Int      @id @default(autoincrement())
    descricao    String
    createdAt    DateTime @default(now())
    materiaPrima String[]
    entrega      DateTime

    pedido   Pedido @relation(fields: [pedidoId], references: [id])
    pedidoId Int

    tarefas         Tarefa @relation(fields: [fichaProducaoId], references: [id])
    fichaProducaoId Int
}

model Tarefa {
    id            Int      @id @default(autoincrement())
    nome          String
    createdAt     DateTime @default(now())
    descricao     String
    isObrigatorio Boolean
    isSimultanea  Boolean

    fichasProducao FichaProducao[]
}

model Cliente {
    id        Int      @id @default(autoincrement())
    nome      String
    cpf       String
    telefone  String
    endereco  String
    email     String   @unique
    createdAt DateTime @default(now())
    pedidos   Pedido[]
}

